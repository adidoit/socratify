---
title: "Building with Patterns: The Subset Pattern"
company: "mongodb"
url: "https://www.mongodb.com/blog/post/building-with-patterns-the-subset-pattern"
type: "direct_systems_collection"
date: "2025-09-15"
---

# Building with Patterns: The Subset Pattern

[Learn More About MongoDB at MongoDB University](https://university.mongodb.com)

Daniel Coupal and Ken W. Alger  
February 28, 2019 | Updated: March 19, 2019  


Some years ago, the first PCs had a whopping 256KB of RAM and dual 5.25" floppy drives. No hard drives as they were incredibly expensive at the time. These limitations resulted in having to physically swap floppy disks due to a lack of memory when working with large (for the time) amounts of data. If only there was a way back then to only bring into memory the data I frequently used, as in a subset of the overall data.

Modern applications aren't immune from exhausting resources. MongoDB keeps frequently accessed data, referred to as the [working set](https://docs.mongodb.com/manual/reference/glossary/#term-working-set), in RAM. When the working set of data and indexes grows beyond the physical RAM allotted, performance is reduced as disk accesses starts to occur and data rolls out of RAM.

How can we solve this? First, we could add more RAM to the server. That only scales so much though. We can look at [sharding](https://docs.mongodb.com/manual/reference/glossary/#term-shard) our collection, but that comes with additional costs and complexities that our application may not be ready for. Another option is to reduce the size of our working set. This is where we can leverage the Subset Pattern.

#### The Subset Pattern

This pattern addresses the issues associated with a working set that exceeds RAM, resulting in information being removed from memory. This is frequently caused by large documents which have a lot of data that isn't actually used by the application. What do I mean by that exactly?

Imagine an e-commerce site that has a list of reviews for a product. When accessing that product's data it's quite possible that we'd only need the most recent ten or so reviews. Pulling in the entirety of the product data with _all_ of the reviews could easily cause the working set to expand.

![A full document with reviews](https://webassets.mongodb.com/_com_assets/cms/fulldocsubset-0jesu52gzs.png)

Instead of storing all the reviews with the product, we can split the collection into two collections. One collection would have the most frequently used data, e.g. current reviews and the other collection would have less frequently used data, e.g. old reviews, product history, etc. We can duplicate part of a 1-N or N-N relationship that is used by the most used side of the relationship.

![A document with a subset and a full review collection](https://webassets.mongodb.com/_com_assets/cms/docsubset2-ncq6t9lt01.png)

In the _Product_ collection, we'll only keep the ten most recent reviews. This allows the working set to be reduced by only bringing in a portion, or subset, of the overall data. The additional information, reviews in this example, are stored in a separate _Reviews_ collection that can be accessed if the user wants to see additional reviews. When considering where to split your data, the most used part of the document should go into the "main" collection and the less frequently used data into another. For our reviews, that split might be the number of reviews visible on the product page.

#### Sample Use Case

The Subset Pattern is very useful when we have a large portion of data inside a document that is rarely needed. Product reviews, article comments, actors in a movie are all examples of use cases for this pattern. Whenever the document size is putting pressure on the size of the working set and causing the working set to exceed the computer's RAM capacities, the Subset Pattern is an option to consider.

#### Conclusion

By using smaller documents with more frequently accessed data, we reduce the overall size of the working set. This allows for shorter disk access times for the most frequently used information that an application needs. One tradeoff that we must make when using the Subset Pattern is that we must manage the subset and also if we need to pull in older reviews or all of the information, it will require additional trips to the database to do so.

The next post in this series will look at the features and benefits of the _[Extended Reference Pattern](https://www.mongodb.com/blog/post/building-with-patterns-the-extended-reference-pattern)_.

If you have questions, please leave comments below.

#### Previous Parts of _Building with Patterns_ :

  * The [Polymorphic](https://www.mongodb.com/blog/post/building-with-patterns-the-polymorphic-pattern) pattern
  * The [Attribute](https://www.mongodb.com/blog/post/building-with-patterns-the-attribute-pattern) pattern
  * The [Bucket](https://www.mongodb.com/blog/post/building-with-patterns-the-bucket-pattern) pattern
  * The [Outlier](https://www.mongodb.com/blog/post/building-with-patterns-the-outlier-pattern) pattern
  * The [Computed](https://www.mongodb.com/blog/post/building-with-patterns-the-computed-pattern) pattern



[](https://www.facebook.com/sharer.php?u=https://www.mongodb.com/company/blog/building-with-patterns-the-subset-pattern)[](https://www.linkedin.com/shareArticle?mini=true&url=https://www.mongodb.com/company/blog/building-with-patterns-the-subset-pattern&title=Building with Patterns: The Subset Pattern&summary=Using a particular subset of documents within a document and how it saves RAM&source=MongoDB)[](https://reddit.com/submit?url=https://www.mongodb.com/company/blog/building-with-patterns-the-subset-pattern&title=Building with Patterns: The Subset Pattern)[](https://twitter.com/intent/tweet?url=https://www.mongodb.com/company/blog/building-with-patterns-the-subset-pattern&text=Building with Patterns: The Subset Pattern)

[**← Previous** Build a Slack App in 10 minutes with MongoDB Stitch Slack is not only the fastest growing startup in history , but it's also an app by the same name and one of the most popular communication tools in use today. We use it extensively at MongoDB to foster efficient communications between teams and across the company. We're not alone. It seems like every developer I encounter uses it in their company as well. One interesting thing about Slack (and there are many) is its extensibility. There are several ways you can extend Slack. Building chatbots, applications that interface with the communication service and extending Slack through the introduction of additional commands called "slash commands" that enable Slack users to communicate with external services. In this article, we'll build a simple slash command that enables users to store and retrieve data in and from a MongoDB database. I'm always finding interesting information on the internet that I want to share with my team members so let's build an application we'll call URL Stash that will store interesting URLs for later retrieval via a Slack slash command. February 27, 2019](/blog/post/build-a-slack-app-in-10-minutes-with-mongodb-stitch)

[**Next →**Unlock AI With MongoDB and LTIMindtree’s BlueVerse Foundry  Many enterprises are eager to capitalize on gen AI to transform operations and stay competitive, but most remain stuck in proofs of concept that never scale. The problem isn’t ambition. It’s architecture. Rigid legacy systems, brittle pipelines, and fragmented data make it hard to move from idea to impact. That’s why LTIMindtree partnered with MongoDB to create BlueVerse Foundry : a no-code, full-stack AI platform powered by MongoDB Atlas , built to help enterprises quickly go from prototype to production without compromising governance, performance, or flexibility. The power of MongoDB: Data without limits At the heart of this platform is MongoDB Atlas, a multi-cloud database that redefines how enterprises manage and use data for AI. Unlike traditional relational databases, MongoDB’s document model adapts naturally to complex, evolving data, without the friction of rigid schemas or heavy extract, transform, and load pipelines. For AI workloads that rely on diverse formats like vector embeddings, images, or audio, MongoDB is purpose built. Its real-time data capabilities eliminate delays and enable continuous learning and querying. Search is another differentiator. With MongoDB Atlas Search and Atlas Vector Search , MongoDB enables enterprises to combine semantic and keyword queries for highly accurate, context-aware results. GraphRAG adds another layer, connecting relationships in data through retrieval-augmented generation (RAG) to reveal deeper insights. Features like semantic caching ensure performance remains high even under pressure, while built-in support for both public and private cloud deployments makes it easy to scale. Together, these capabilities turn MongoDB from a data store into an AI acceleration engine, supporting everything from retrieval to real-time interaction to full-stack observability. The challenge: Building with limitations Traditional systems were never designed for the kind of data modern AI requires. As enterprises embrace gen AI models that integrate structured and unstructured data, legacy infrastructure shows its cracks. Real-time processing becomes cumbersome, multiple environments create redundancy, and rising computing needs inflate costs. Building AI solutions often demands complex coding, meticulous model training, and extensive infrastructure planning, resulting in a delayed time to market. Add to that the imperative of producing responsible AI, and the challenge becomes even steeper. Models must not only perform but also be accurate, unbiased, and aligned with ethical standards. Enterprises are left juggling AI economics, data security, lineage tracking, and governance, all while trying to deliver tangible business value. This is precisely why a flexible, scalable, and AI-ready data foundation like MongoDB is critical. Its ability to handle diverse data types and provide real-time access directly addresses the limitations of traditional systems when it comes to gen AI. The solution: A smarter way to scale AI With BlueVerse Foundry and MongoDB Atlas, enterprises get the best of both worlds: LTIMindtree’s rapid no-code orchestration and MongoDB’s flexible, scalable data layer. This joint solution eliminates common AI bottlenecks and accelerates deployment, without the need for complex infrastructure or custom code. BlueVerse Foundry’s modular, no-code architecture enables enterprises to quickly build, deploy, and scale AI agents and apps without getting bogged down by technical complexity. This is significantly amplified by MongoDB’s inherent scalability, schema flexibility, and native RAG capabilities, which were key reasons for LTIMindtree choosing MongoDB as the foundational data layer. With features like the no-code agent builder, agent marketplace, and business-process-automation blueprints, enterprises can create tailored solutions that are ready for production, all powered by MongoDB Atlas. A synergistic partnership: Smarter together The collaboration between MongoDB and LTIMindtree’s BlueVerse Foundry brings together powerful AI capabilities with a future-ready database backbone. This partnership highlights how MongoDB’s AI narrative and broader partner strategy focus on enabling enterprises to build intelligent applications faster and more efficiently. Together, they simplify deployment, enable seamless integration with existing systems, and create a platform that can scale effortlessly as enterprise needs evolve. What makes this partnership stand out is the ability to turn ideas into impact faster. With no-code tools, prebuilt agents, and MongoDB’s flexible data model, enterprises don’t need to wait months to see results. They can use their existing infrastructure, plug in seamlessly, and start delivering real-time AI-driven insights almost immediately. Governance, performance, and scalability aren’t afterthoughts; they’re built into every layer of this ecosystem. “We’re seeing a shift from experimentation to execution—enterprises are ready to scale gen AI, but they need the right data foundation,” said Haim Ribbi, Vice President of Global CSI, VAR and Tech Partner at MongoDB. “That’s where MongoDB Atlas fits in, and where an agentic platform like LTIMindtree’s BlueVerse Foundry uses it to its full potential for innovation.” Real-world impact: From data to differentiated experiences This joint solution is already delivering real-world impact. A leading streaming platform used LTIMindtree’s solution, powered by MongoDB, to personalize content recommendations in real time. With MongoDB handling the heavy lifting of diverse data management and live queries, the company saw a 30% rise in user engagement and a 20% improvement in retention. Central to this transformation is the platform’s content hub, which acts as a unified data catalog, organizing enterprise information so it’s accessible, secure, and ready to power next-generation AI solutions with MongoDB’s robust data management. Whether dealing with text, images, or audio, the platform seamlessly manages multimodal data, eliminating the need for separate systems or processes. For businesses looking to accelerate development, BlueVerse Foundry and Marketplace offer a no-code builder, prebuilt agents, and templates, enabling teams to go from concept to deployment in a fraction of the time compared to traditional methods. BlueVerse Foundry’s RAG pipelines simplify building smart applications, using MongoDB Atlas Search and MongoDB Atlas Vector Search for highly effective RAG. Advanced orchestration connects directly with AI models, enabling rapid experimentation and deployment. A globally acclaimed media company has been using BlueVerse Foundry to automate content tagging and digital asset management, cutting its discovery time by 40% and reducing overheads by 15%—clear evidence of gen AI’s bottom-line impact when implemented right. BlueVerse Foundry’s strength lies in combining speed and control. By providing everything from ready-to-use user-experience kits, over 25 plug-and-play microservices, token-based economic models, 100+ safe listed large language models (LLMs), tools and agents, and full-stack observability, BlueVerse Foundry and Marketplace enables enterprises to move faster without losing sight of governance. Its support for voice interfaces, regional languages, Teams, mobile, and wearables like Meta AI Glasses ensures an omnichannel experience out of the box. Responsible AI: A built-in capability LTIMindtree doesn’t just build AI faster; it builds it responsibly. With built-in measures like LLM output evaluation, moderation, and audit trails, the platform ensures enterprises can trust the results their models generate. This is further supported by MongoDB’s robust security features and data governance capabilities, ensuring a secure and ethical AI ecosystem. It’s not just about preventing hallucinations or bias; it’s about creating an ecosystem where quality, transparency, and ethics are fundamental, not optional. Scaling: Streamlined for the long term The platform’s libraries, app galleries, and FinOps tooling enable businesses to test, deploy, and expand with confidence. Powered by MongoDB Atlas’s inherent scalability and multi-cloud flexibility, BlueVerse Foundry is built for long-term AI success, not just early experimentation. Enterprise AI: From possibility to production The BlueVerse Foundry and Marketplace, powered by MongoDB, is more than a technological partnership; it’s a new standard for enterprise AI. It combines deep AI expertise with an agile data foundation, helping organizations escape the trap of endless proofs of concept and unlock meaningful value. For enterprises still unsure about gen AI’s return on investment, this solution offers a proven path forward, grounded in real-world success, scalability, and impact. The future of AI isn’t something to wait for. With LTIMindtree and MongoDB, it’s already here. Explore how LTIMindtree and MongoDB are transforming gen AI from a concept into an enterprise-ready reality. Learn more about building AI applications with MongoDB through the AI Learning Hub . September 15, 2025](/company/blog/innovation/unlock-ai-with-mongodb-ltimindtrees-blueverse-foundry)
